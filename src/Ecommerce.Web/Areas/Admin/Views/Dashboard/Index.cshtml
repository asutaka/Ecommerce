@model DashboardViewModel
@{
    ViewData["Title"] = "Bảng điều khiển";
}

<section class="admin-hero">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <p class="eyebrow text-muted">Moderno Admin</p>
            <h1>Bảng điều khiển Saga</h1>
            <p>Giám sát vòng đời hóa đơn → thanh toán → thông báo.</p>
        </div>
        <div class="d-flex gap-2">
            <a asp-controller="Orders" asp-action="Index" class="btn btn-outline-light rounded-pill px-4">
                <i class="bi bi-receipt me-2"></i>Quản lý đơn hàng
            </a>
            <a asp-controller="Products" asp-action="Index" class="btn btn-outline-light rounded-pill px-4">
                <i class="bi bi-box-seam me-2"></i>Quản lý sản phẩm
            </a>
            <a class="ghost" asp-area="" asp-controller="Home" asp-action="Index">← Về Storefront</a>
        </div>
    </div>
</section>

<section class="admin-stats">
    <article>
        <p>Đơn hàng</p>
        <strong>@Model.Stats.Orders</strong>
    </article>
    <article>
        <p>Đã thanh toán</p>
        <strong>@Model.Stats.PaidOrders</strong>
    </article>
    <article>
        <p>Revenue</p>
        <strong>@Model.Stats.Revenue.ToString("C0", new System.Globalization.CultureInfo("vi-VN"))</strong>
    </article>
    <article>
        <p>Notifications</p>
        <strong>@Model.Stats.Notifications</strong>
    </article>
</section>

<section class="admin-table">
    <header>
        <h2>Đơn hàng gần nhất</h2>
        <small>ID Correlation = OrderId</small>
    </header>
    <table>
        <thead>
            <tr>
                <th>OrderId</th>
                <th>Khách hàng</th>
                <th>Trạng thái</th>
                <th>Tổng</th>
                <th>Thời gian</th>
            </tr>
        </thead>
        <tbody>
        @foreach (var order in Model.RecentOrders)
        {
            <tr>
                <td><code>@order.OrderId</code></td>
                <td>@order.Customer</td>
                <td>@order.Status</td>
                <td>@order.Total.ToString("C0", new System.Globalization.CultureInfo("vi-VN"))</td>
                <td>@order.CreatedAt.ToLocalTime().ToString("dd/MM HH:mm")</td>
            </tr>
        }
        </tbody>
    </table>
</section>

@model Ecommerce.Infrastructure.Entities.Order

@{
    ViewData["Title"] = "Đặt hàng thành công";
}

<style>
    .confirmation-container {
        max-width: 800px;
        margin: 60px auto;
        padding: 0 20px;
    }
    
    .success-icon {
        text-align: center;
        margin-bottom: 30px;
    }
    
    .success-icon i {
        font-size: 80px;
        color: #10b981;
    }
    
    .confirmation-card {
        background: white;
        border-radius: 12px;
        padding: 40px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        margin-bottom: 20px;
    }
    
    .order-info {
        border-bottom: 1px solid #e5e7eb;
        padding-bottom: 20px;
        margin-bottom: 20px;
    }
    
    .info-row {
        display: flex;
        justify-content: space-between;
        padding: 10px 0;
    }
    
    .info-label {
        color: #6b7280;
        font-weight: 500;
    }
    
    .order-items {
        margin-top: 20px;
    }
    
    .order-item {
        display: flex;
        justify-content: space-between;
        padding: 12px 0;
        border-bottom: 1px solid #f3f4f6;
    }
    
    .total-row {
        display: flex;
        justify-content: space-between;
        padding: 16px 0;
        font-size: 18px;
        font-weight: 600;
        border-top: 2px solid #1f2937;
        margin-top: 16px;
    }
    
    .btn-continue {
        display: inline-block;
        padding: 14px 32px;
        background: #3b82f6;
        color: white;
        text-decoration: none;
        border-radius: 8px;
        font-weight: 600;
        text-align: center;
        transition: background 0.2s;
    }
    
    .btn-continue:hover {
        background: #2563eb;
        color: white;
    }
</style>

<div class="confirmation-container">
    <div class="success-icon">
        <i class="bi bi-check-circle-fill"></i>
    </div>
    
    <div class="confirmation-card">
        <h1 style="text-align: center; margin-bottom: 10px;">Đặt hàng thành công!</h1>
        <p style="text-align: center; color: #6b7280; margin-bottom: 30px;">
            Cảm ơn bạn đã đặt hàng. Chúng tôi sẽ liên hệ với bạn sớm nhất.
        </p>
        
        <div class="order-info">
            <h3 style="margin-bottom: 16px;">Thông tin đơn hàng</h3>
            <div class="info-row">
                <span class="info-label">Mã đơn hàng:</span>
                <strong>#@Model.Id.ToString().Substring(0, 8).ToUpper()</strong>
            </div>
            <div class="info-row">
                <span class="info-label">Ngày đặt:</span>
                <strong>@Model.CreatedAt.ToLocalTime().ToString("dd/MM/yyyy HH:mm")</strong>
            </div>
            <div class="info-row">
                <span class="info-label">Trạng thái:</span>
                <strong style="color: #f59e0b;">Đang xử lý</strong>
            </div>
        </div>
        
        <div class="order-info">
            <h3 style="margin-bottom: 16px;">Thông tin nhận hàng</h3>
            <div class="info-row">
                <span class="info-label">Người nhận:</span>
                <strong>@Model.CustomerName</strong>
            </div>
            <div class="info-row">
                <span class="info-label">Số điện thoại:</span>
                <strong>@Model.CustomerPhone</strong>
            </div>
            <div class="info-row">
                <span class="info-label">Email:</span>
                <strong>@Model.CustomerEmail</strong>
            </div>
            <div class="info-row">
                <span class="info-label">Địa chỉ:</span>
                <strong>@Model.ShippingAddress</strong>
            </div>
            @if (!string.IsNullOrEmpty(Model.Note))
            {
                <div class="info-row">
                    <span class="info-label">Ghi chú:</span>
                    <strong>@Model.Note</strong>
                </div>
            }
        </div>
        
        <div class="order-items">
            <h3 style="margin-bottom: 16px;">Sản phẩm đã đặt</h3>
            @foreach (var item in Model.Items)
            {
                <div class="order-item">
                    <div>
                        <strong>@item.ProductName</strong>
                        @if (!string.IsNullOrEmpty(item.VariantColor) || !string.IsNullOrEmpty(item.VariantSize))
                        {
                            <div style="font-size: 13px; color: #6b7280;">
                                @if (!string.IsNullOrEmpty(item.VariantColor))
                                {
                                    <span>Màu: @item.VariantColor</span>
                                }
                                @if (!string.IsNullOrEmpty(item.VariantSize))
                                {
                                    <span> | Size: @item.VariantSize</span>
                                }
                            </div>
                        }
                        <div style="font-size: 13px; color: #6b7280;">
                            Số lượng: @item.Quantity
                        </div>
                    </div>
                    <strong>@((item.UnitPrice * item.Quantity).ToString("N0"))đ</strong>
                </div>
            }
        </div>
        
        <div style="margin-top: 20px;">
            <div class="info-row">
                <span>Tạm tính:</span>
                <strong>@Model.Subtotal.ToString("N0")đ</strong>
            </div>
            @if (Model.Discount > 0)
            {
                <div class="info-row" style="color: #10b981;">
                    <span>Giảm giá (@Model.CouponCode):</span>
                    <strong>-@Model.Discount.ToString("N0")đ</strong>
                </div>
            }
            <div class="info-row">
                <span>Phí vận chuyển:</span>
                <strong>@Model.ShippingFee.ToString("N0")đ</strong>
            </div>
            <div class="total-row">
                <span>Tổng cộng:</span>
                <strong style="color: #3b82f6;">@Model.Total.ToString("N0")đ</strong>
            </div>
        </div>
        
        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #e5e7eb;">
            <div class="info-row">
                <span class="info-label">Hình thức thanh toán:</span>
                <strong>
                    @if (Model.PaymentMethod == "COD")
                    {
                        <span>Thanh toán khi nhận hàng (COD)</span>
                    }
                    else if (Model.PaymentMethod == "Banking")
                    {
                        <span>Chuyển khoản ngân hàng</span>
                    }
                    else
                    {
                        <span>Ví điện tử</span>
                    }
                </strong>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 40px;">
            <a href="@Url.Action("Index", "Home")" class="btn-continue">
                Tiếp tục mua sắm
            </a>
        </div>
    </div>
    
    <div style="text-align: center; color: #6b7280; margin-top: 20px;">
        <p>Nếu có bất kỳ thắc mắc nào, vui lòng liên hệ với chúng tôi qua email hoặc hotline.</p>
    </div>
</div>

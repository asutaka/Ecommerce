@inject Ecommerce.Web.Services.ICartService CartService

@{
    var sessionId = Context.Session.GetString("_CartId");
    var cartId = Guid.Empty;
    var itemCount = 0;

    if (!string.IsNullOrEmpty(sessionId))
    {
        cartId = await CartService.GetOrCreateCartAsync(sessionId);
        itemCount = await CartService.GetCartItemCountAsync(cartId);
    }
}

<a href="@Url.Action("Index", "Cart")" class="cart-badge">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M9 2L7 6H3L6 20H18L21 6H17L15 2H9Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <circle cx="9" cy="20" r="1"/>
        <circle cx="15" cy="20" r="1"/>
    </svg>
    @if (itemCount > 0)
    {
        <span class="badge" id="cart-badge-count">@itemCount</span>
    }
    else
    {
        <span class="badge" id="cart-badge-count" style="display:none;">0</span>
    }
</a>

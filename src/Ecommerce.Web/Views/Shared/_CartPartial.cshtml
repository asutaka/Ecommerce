@inject Ecommerce.Web.Services.ICartService CartService

@{
    var sessionId = Context.Session.GetString("_CartId");
    var cartId = Guid.Empty;
    var itemCount = 0;

    if (!string.IsNullOrEmpty(sessionId))
    {
        cartId = await CartService.GetOrCreateCartAsync(sessionId);
        itemCount = await CartService.GetCartItemCountAsync(cartId);
    }
}

<a asp-route="cart" class="cart-badge">
    <i class="bi bi-cart3" style="font-size: 1.5rem;"></i>
    <span class="badge" id="cart-badge-count">@itemCount</span>
</a>
